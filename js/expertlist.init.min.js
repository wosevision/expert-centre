function loadSearch(t){var i=$("#expert-search").val();$("#expert-list").addClass("loading").load("index.php #expert-list-inner","q="+i,function(){$("#expert-list").removeClass("loading")}),t.preventDefault()}function loadFilter(t){t.preventDefault();var i=$(this).attr("href");i=i.replace("?",""),$("#expert-list").addClass("loading").load("index.php #expert-list-inner",i,function(){$("#expert-list").removeClass("loading"),$(".expert-filter").click(loadFilter)})}function initList(){$(".stickyNav").stickyNav({additionalMarginTop:80}),$.getJSON("search.php",function(t){experts=t;for(var i=0;i<=experts.length;i++)if(experts[i]){-1==giantArrayOfStuff.indexOf(experts[i].city)&&giantArrayOfStuff.push(experts[i].city);for(var e=experts[i].firstname,n=e.split(" "),s=0;s<=n.length;s++)-1==giantArrayOfStuff.indexOf(n[s])&&""!=n[s]&&giantArrayOfStuff.push(n[s]);-1==giantArrayOfStuff.indexOf(experts[i].lastname)&&giantArrayOfStuff.push(experts[i].lastname),e=experts[i].job_title,n=e.split(" ");for(var s=0;s<=n.length;s++)-1==giantArrayOfStuff.indexOf(n[s])&&""!=n[s]&&"."!=n[s]&&","!=n[s]&&giantArrayOfStuff.push(n[s]);e=experts[i].tagline,n=e.split(" ");for(var s=0;s<=n.length;s++)-1==giantArrayOfStuff.indexOf(n[s])&&""!=n[s]&&"."!=n[s]&&","!=n[s]&&giantArrayOfStuff.push(n[s])}});var t=document.getElementById("expert-search");new Awesomplete(t,{list:giantArrayOfStuff}),$("#expert-searchform").submit(loadSearch),$(".expert-filter").click(loadFilter),$("select#availability").change(function(){var t="a="+$(this).val();$("#expert-list").addClass("loading").load("index.php #expert-list-inner",t,function(){$("#expert-list").removeClass("loading")})}),$("select#expertise").change(function(){var t="i="+$(this).val();$("#expert-list").addClass("loading").load("index.php #expert-list-inner",t,function(){$("#expert-list").removeClass("loading")})})}!function(){function t(t,i){for(var e in t){var n=t[e],s=this.input.getAttribute("data-"+e.toLowerCase());this[e]="number"==typeof n?parseInt(s):!1===n?null!==s:n instanceof Function?null:s,this[e]||0===this[e]||(this[e]=e in i?i[e]:n)}}function i(t,i){return"string"==typeof t?(i||document).querySelector(t):t||null}function e(t,i){return r.call((i||document).querySelectorAll(t))}function n(){e("input.awesomplete").forEach(function(t){new s(t)})}var s=function(e,n){var r=this;this.input=i(e),this.input.setAttribute("autocomplete","false"),this.input.setAttribute("aria-autocomplete","list"),n=n||{},t.call(this,{minChars:2,maxItems:10,autoFirst:!1,filter:s.FILTER_CONTAINS,sort:s.SORT_BYLENGTH,item:function(t,e){return i.create("li",{innerHTML:t.replace(RegExp(i.regExpEscape(e.trim()),"gi"),"<mark>$&</mark>"),"aria-selected":"false"})},replace:function(t){this.input.value=t}},n),this.index=-1,this.container=i.create("div",{className:"awesomplete",around:e}),this.ul=i.create("ul",{hidden:"",inside:this.container}),this.status=i.create("span",{className:"visually-hidden",role:"status","aria-live":"assertive","aria-relevant":"additions",inside:this.container}),i.bind(this.input,{input:this.evaluate.bind(this),blur:this.close.bind(this),keydown:function(t){var i=t.keyCode;r.opened&&(13===i&&r.selected?(t.preventDefault(),r.select()):27===i?r.close():(38===i||40===i)&&(t.preventDefault(),r[38===i?"previous":"next"]()))}}),i.bind(this.input.form,{submit:this.close.bind(this)}),i.bind(this.ul,{mousedown:function(t){if(t=t.target,t!==this){for(;t&&!/li/i.test(t.nodeName);)t=t.parentNode;t&&r.select(t)}}}),this.input.hasAttribute("list")?(this.list="#"+e.getAttribute("list"),e.removeAttribute("list")):this.list=this.input.getAttribute("data-list")||n.list||[],s.all.push(this)};s.prototype={set list(t){Array.isArray(t)?this._list=t:"string"==typeof t&&-1<t.indexOf(",")?this._list=t.split(/\s*,\s*/):(t=i(t))&&t.children&&(this._list=r.apply(t.children).map(function(t){return t.textContent.trim()})),document.activeElement===this.input&&this.evaluate()},get selected(){return-1<this.index},get opened(){return this.ul&&null==this.ul.getAttribute("hidden")},close:function(){this.ul.setAttribute("hidden",""),this.index=-1,i.fire(this.input,"awesomplete-close")},open:function(){this.ul.removeAttribute("hidden"),this.autoFirst&&-1===this.index&&this["goto"](0),i.fire(this.input,"awesomplete-open")},next:function(){this["goto"](this.index<this.ul.children.length-1?this.index+1:-1)},previous:function(){var t=this.ul.children.length;this["goto"](this.selected?this.index-1:t-1)},"goto":function(t){var e=this.ul.children;this.selected&&e[this.index].setAttribute("aria-selected","false"),this.index=t,t>-1&&0<e.length&&(e[t].setAttribute("aria-selected","true"),this.status.textContent=e[t].textContent),i.fire(this.input,"awesomplete-highlight")},select:function(t){if(t=t||this.ul.children[this.index]){var e;i.fire(this.input,"awesomplete-select",{text:t.textContent,preventDefault:function(){e=!0}}),e||(this.replace(t.textContent),this.close(),i.fire(this.input,"awesomplete-selectcomplete"))}},evaluate:function(){var t=this,i=this.input.value;i.length>=this.minChars&&0<this._list.length?(this.index=-1,this.ul.innerHTML="",this._list.filter(function(e){return t.filter(e,i)}).sort(this.sort).every(function(e,n){return t.ul.appendChild(t.item(e,i)),n<t.maxItems-1}),0===this.ul.children.length?this.close():this.open()):this.close()}},s.all=[],s.FILTER_CONTAINS=function(t,e){return RegExp(i.regExpEscape(e.trim()),"i").test(t)},s.FILTER_STARTSWITH=function(t,e){return RegExp("^"+i.regExpEscape(e.trim()),"i").test(t)},s.SORT_BYLENGTH=function(t,i){return t.length!==i.length?t.length-i.length:i>t?-1:1};var r=Array.prototype.slice;return i.create=function(t,e){var n,s=document.createElement(t);for(n in e){var r=e[n];"inside"===n?i(r).appendChild(s):"around"===n?(r=i(r),r.parentNode.insertBefore(s,r),s.appendChild(r)):n in s?s[n]=r:s.setAttribute(n,r)}return s},i.bind=function(t,i){if(t)for(var e in i){var n=i[e];e.split(/\s+/).forEach(function(i){t.addEventListener(i,n)})}},i.fire=function(t,i,e){var n=document.createEvent("HTMLEvents");n.initEvent(i,!0,!0);for(var s in e)n[s]=e[s];t.dispatchEvent(n)},i.regExpEscape=function(t){return t.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")},"undefined"!=typeof Document&&("loading"!==document.readyState?n():document.addEventListener("DOMContentLoaded",n)),s.$=i,s.$$=e,"undefined"!=typeof self&&(self.Awesomplete=s),"object"==typeof exports&&(module.exports=s),s}(),function(t){t.fn.stickyNav=function(i){var e={containerSelector:"",additionalMarginTop:0,additionalMarginBottom:0,updateSidebarHeight:!0,minWidth:0};i=t.extend(e,i),i.additionalMarginTop=parseInt(i.additionalMarginTop)||0,i.additionalMarginBottom=parseInt(i.additionalMarginBottom)||0,t("head").append(t('<style>.stickyNav:after {content: ""; display: table; clear: both;}</style>')),this.each(function(){function e(){s.fixedScrollTop=0,s.sidebar.css({"min-height":"1px"}),s.stickySidebar.css({position:"static",width:""})}function n(i){var e=i.height();return i.children().each(function(){e=Math.max(e,t(this).height())}),e}var s={};s.sidebar=t(this),s.options=i||{},s.container=t(s.options.containerSelector),0==s.container.size()&&(s.container=s.sidebar.parent()),s.sidebar.parents().css("-webkit-transform","none"),s.sidebar.css({position:"relative",overflow:"visible","-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box","box-sizing":"border-box"}),s.stickySidebar=s.sidebar.find(".stickyNav"),0==s.stickySidebar.length&&(s.sidebar.find("script").remove(),s.stickySidebar=t("<div>").addClass("stickyNav").append(s.sidebar.children()),s.sidebar.append(s.stickySidebar)),s.marginTop=parseInt(s.sidebar.css("margin-top")),s.marginBottom=parseInt(s.sidebar.css("margin-bottom")),s.paddingTop=parseInt(s.sidebar.css("padding-top")),s.paddingBottom=parseInt(s.sidebar.css("padding-bottom"));var r=s.stickySidebar.offset().top,a=s.stickySidebar.outerHeight();s.stickySidebar.css("padding-top",1),s.stickySidebar.css("padding-bottom",1),r-=s.stickySidebar.offset().top,a=s.stickySidebar.outerHeight()-a-r,0==r?(s.stickySidebar.css("padding-top",0),s.stickySidebarPaddingTop=0):s.stickySidebarPaddingTop=1,0==a?(s.stickySidebar.css("padding-bottom",0),s.stickySidebarPaddingBottom=0):s.stickySidebarPaddingBottom=1,s.previousScrollTop=null,s.fixedScrollTop=0,e(),s.onScroll=function(s){if(s.stickySidebar.is(":visible")){if(t("body").width()<s.options.minWidth)return void e();if(s.sidebar.outerWidth(!0)+50>s.container.width())return void e();var r=t(document).scrollTop(),a="static";if(r>=s.container.offset().top+(s.paddingTop+s.marginTop-s.options.additionalMarginTop)){var o,d=s.paddingTop+s.marginTop+i.additionalMarginTop,l=s.paddingBottom+s.marginBottom+i.additionalMarginBottom,c=s.container.offset().top,p=s.container.offset().top+n(s.container),u=0+i.additionalMarginTop,f=s.stickySidebar.outerHeight()+d+l<t(window).height();o=f?u+s.stickySidebar.outerHeight():t(window).height()-s.marginBottom-s.paddingBottom-i.additionalMarginBottom;var h=c-r+s.paddingTop+s.marginTop,g=p-r-s.paddingBottom-s.marginBottom,b=s.stickySidebar.offset().top-r,m=s.previousScrollTop-r;"fixed"==s.stickySidebar.css("position")&&(b+=m),b=m>0?Math.min(b,u):Math.max(b,o-s.stickySidebar.outerHeight()),b=Math.max(b,h),b=Math.min(b,g-s.stickySidebar.outerHeight());var v=s.container.height()==s.stickySidebar.outerHeight();a=(v||b!=u)&&(v||b!=o-s.stickySidebar.outerHeight())?r+b-s.sidebar.offset().top-s.paddingTop<=i.additionalMarginTop?"static":"absolute":"fixed"}if("fixed"==a)s.stickySidebar.css({position:"fixed",width:s.sidebar.width(),top:b,left:s.sidebar.offset().left+parseInt(s.sidebar.css("padding-left"))+parseInt(s.sidebar.css("border-left"))});else if("absolute"==a){var x={};"absolute"!=s.stickySidebar.css("position")&&(x.position="absolute",x.top=r+b-s.sidebar.offset().top-s.stickySidebarPaddingTop-s.stickySidebarPaddingBottom),x.width=s.sidebar.width(),x.left="",s.stickySidebar.css(x)}else"static"==a&&e();"static"!=a&&1==s.options.updateSidebarHeight&&s.sidebar.css({"min-height":s.stickySidebar.outerHeight()+s.stickySidebar.offset().top-s.sidebar.offset().top+s.paddingBottom}),s.previousScrollTop=r}},s.onScroll(s),t(document).scroll(function(t){return function(){t.onScroll(t)}}(s)),t(window).resize(function(t){return function(){t.stickySidebar.css({position:"static"}),t.onScroll(t)}}(s))})}}(jQuery);var experts=[],giantArrayOfStuff=[];$(document).ready(initList);